webpackJsonp([1],{"+ptQ":function(e,t){},"7zck":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),i=a("3EgV"),n=a.n(i),o=new r.a,l=a("m0f6"),s=a.n(l),c=a("riU/"),d=a.n(c),p=a("M4fF"),m=a.n(p),u={name:"v-selection-panel",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{period:2004,periodText:"",items:["yearly","six_yearly"],modes:["Original mean","Classified mean","Original P90","Classified P90"],selectPeriod:"yearly",parameter:"Original mean",value:[2002,2003],shapelayer:!1}},watch:{selectPeriod:{handler:function(e){o.$emit("change-selectPeriod",this.selectPeriod),this.updateTimeSlider(),this.updatePaint()},deep:!0},parameter:{handler:function(e){o.$emit("change-parameter",this.parameter),this.updatePaint()},deep:!0},value:{handler:function(e){this.updatePaint()},deep:!0},layers:{handler:function(e){this.layers=e,this.updatePaint()},deep:!0}},mounted:function(){var e=this;o.$on("map-loaded",function(t){o.$on("shapes-added",function(){e.createColorSlider(),e.createTimeSlider(),o.$emit("change-selectPeriod",e.selectPeriod),o.$emit("change-parameter",e.parameter)})})},methods:{updateTimeSlider:function(){if("six_yearly"===this.selectPeriod)var e=6,t=6,a={min:2002,max:2023};else"yearly"===this.selectPeriod&&(e=1,t=1,a={min:2002,max:2017});this.timeslider.updateOptions({margin:e,limit:t,range:a})},createTimeSlider:function(){var e=this,t=document.getElementById("slider-time");this.timeslider=s.a.create(t,{start:[2002,2007],step:1,margin:1,limit:1,behaviour:"drag-fixed",connect:!0,range:{min:2002,max:2017},tooltips:[d()({decimals:0}),d()({decimals:0})]}),this.timeslider.on("slide.one",function(t){e.value=t,o.$emit("change-time-slider",t)}),this.updatePaint()},createColorSlider:function(){var e=document.getElementById("slider-color"),t=s.a.create(e,{start:[20,40,60],connect:[!0,!0,!0,!0],range:{min:[0],max:[80]},step:5,margin:5,padding:5,pips:{mode:"values",values:[0,20,40,60,80],density:4,format:d()({decimals:2})},cssPrefix:"noUi-",tooltips:[d()({decimals:1}),d()({decimals:1}),d()({decimals:1})]});o.$emit("create-color-slider",t);for(var a=e.querySelectorAll(".noUi-connect"),r=["c-1-color","c-2-color","c-3-color","c-4-color"],i=0;i<a.length;i++)a[i].classList.add(r[i]);t.on("slide.one",function(e){o.$emit("create-color-slider",t)})},updatePaint:function(){var e=this,t=parseInt(parseInt(this.value[0]));m.a.each(this.layers,function(a){e.map.setPaintProperty(a.id,"raster-opacity",0),a.id===t.toString()&&"yearly"===e.selectPeriod?e.map.setPaintProperty(t.toString(),"raster-opacity",1):a.id===t.toString()+"_"+(t+5).toString()&&"six_yearly"===e.selectPeriod&&e.map.setPaintProperty(t.toString()+"_"+(t+5).toString(),"raster-opacity",1)})}},components:{}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-selection-panel"},[a("v-toolbar",{attrs:{slot:"header",flat:"",color:"grey lighten-4"},slot:"header"},[a("v-toolbar-title",[e._v("\r\n      Select image\r\n    ")])],1),e._v(" "),a("v-list",{attrs:{dense:"","pt-0":"","three-line":""}},[a("v-card",[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[e._v("\r\n            Select period:\r\n          ")]),e._v(" "),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{id:"select-period",items:e.items,label:"Select","single-line":""},model:{value:e.selectPeriod,callback:function(t){e.selectPeriod=t},expression:"selectPeriod"}})],1)],1),e._v(" "),a("div",{attrs:{id:"slider-time"}}),e._v(" "),a("v-radio-group",{model:{value:e.parameter,callback:function(t){e.parameter=t},expression:"parameter"}},e._l(e.modes,function(e){return a("v-radio",{key:e,attrs:{label:""+e,value:e}})})),e._v(" "),a("div",{attrs:{id:"slider-color",hidden:"Original mean"===e.parameter||"Original P90"===e.parameter}}),e._v(" "),"Original mean"===e.parameter||"Original P90"===e.parameter?a("div",{attrs:{id:"colorbar"}}):e._e(),e._v(" "),"Original mean"===e.parameter||"Original P90"===e.parameter?a("div",{attrs:{id:"bartext"}},[e._v(" 0 80 "),a("span")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(u,v,!1,function(e){a("f98/")},null,null).exports,y={data:function(){return{welcome:!0,dialog:!0}},watch:{dialog:{handler:function(e){this.dialog=e,o.$emit("change-dialog",e)},deep:!0}},methods:{openTutorial:function(){document.getElementById("welcome").style.display="none",document.getElementById("tutorial1").style.display="block"}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600px","max-height":"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{id:"welcome",light:""}},[a("v-card-media",{attrs:{src:"http://flakphoto.com/assets/photos/corey-arnold-the-north-sea.jpg",height:"200px"}}),e._v(" "),a("v-card-title",[a("h3",{staticClass:"headline mb-0"},[e._v("\r\n        Hallo allemaal\r\n      ")]),e._v(" "),a("div",[e._v("Wat fijn dat je er bent! Ben je voor het eerst hier? Of ben je al Bekend? ")]),e._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{round:"",color:"primary",dark:""},on:{click:function(t){t.stopPropagation(),e.dialog=!1}}},[e._v("Al bekend")]),e._v(" "),a("v-btn",{attrs:{round:"",color:"primary",dark:""},nativeOn:{click:function(t){e.openTutorial()}}},[e._v("Eerste keer")])],1)])],1),e._v(" "),a("v-card",{attrs:{id:"tutorial1",light:""}},[a("v-card-media",{attrs:{src:"http://flakphoto.com/assets/photos/corey-arnold-the-north-sea.jpg",height:"200px"}}),e._v(" "),a("v-card-title",[a("h3",{staticClass:"headline mb-0"},[e._v("\r\n      Tutorial\r\n    ")]),e._v(" "),a("div",[e._v("This is a short introduction to the sandmotor viewer.")])]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){t.stopPropagation(),e.dialog=!1}}},[e._v("Close")])],1)],1)],1)},staticRenderFns:[]};var g={name:"v-info-panel",data:function(){return{dialog:!0}},watch:{dialog:{handler:function(e){this.dialog=e},deep:!0}},mounted:function(){var e=this;o.$on("change-dialog",function(t){e.dialog=t})},methods:{clickOpenDap:function(){window.open("https://tl-ng038.xtr.deltares.nl/thredds/catalog.html","_blank")}},components:{"v-welcome":a("VU/8")(y,f,!1,function(e){a("Y+uu")},"data-v-ef3dd4a2",null).exports}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-info-panel"},[a("v-toolbar",{attrs:{slot:"header",flat:"",color:"grey lighten-4"},slot:"header"},[a("v-toolbar-title",[e._v("\r\n      Information\r\n    ")])],1),e._v(" "),a("v-list",{attrs:{dense:"","pt-0":"","three-line":""}},[a("v-card",[a("v-card-text",[e._v("\r\n        MSFD-Eutro is a free and open, active and interactive web-mapping service that shows chlorophyll indicator maps based on growing-season statistics (mean, and max as P90). MSFD-Eutro aims to facilitate the use and appreciation of ocean colour data by policy\r\n        advisors and policy makers for the European Marine Strategy Framework Directive (MSFD).\r\n        "),a("div",{staticClass:"text-xs-center"},[a("v-btn",{attrs:{round:"",color:"primary",dark:""},nativeOn:{click:function(t){e.clickOpenDap()}}},[e._v("OpenDap")]),e._v(" "),a("v-btn",{attrs:{round:"",color:"primary",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("Tutorial")])],1),e._v(" "),e.dialog?a("v-welcome",{attrs:{dialog:"dialog"}}):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(g,_,!1,function(e){a("OPxY")},null,null).exports,P=[{id:"ospar-eu-6iavvw",type:"line",source:{url:"mapbox://mariekeeleveld.410g4lyk",type:"vector"},"source-layer":"ospar_eu-6iavvw",filter:["==","$type","LineString"],layout:{visibility:"visible"},paint:{"line-dasharray":[2,2],"line-gap-width":0,"line-color":"#000000"}},{id:"ospar-nl-c0abqr",type:"line",source:{url:"mapbox://mariekeeleveld.cfz5dxdk",type:"vector"},"source-layer":"ospar_nl-c0abqr",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"line-dasharray":[1,1]}},{id:"mwtl-nl-7c3j4z",type:"circle",source:{url:"mapbox://mariekeeleveld.53vxfur6",type:"vector"},"source-layer":"mwtl_nl-7c3j4z",filter:["==","$type","Point"],layout:{visibility:"visible"},paint:{"circle-color":"hsla(0, 0%, 0%, 0.32)"}}],b=a("1e2d"),S=a.n(b),w=a("504h"),k=a.n(w),O=a("VVDx"),E=a.n(O),L=a("7t+N"),$=a.n(L);a("mS+B")(k.a),E()(k.a);var C=[2002,2017],T={"Original mean":"mean_chlorophyll","Classified mean":"mean_chlorophyll","Original P90":"P90_chlorophyll","Classified P90":"P90_chlorophyll"},I={name:"v-map-layers",data:function(){return{map:null,parameter:"Original mean",selectPeriod:"yearly",colorSlider:"",customColor:"",year:2003}},mounted:function(){var e=this;o.$on("change-time-slider",function(t){e.year=t[1]}),o.$on("create-color-slider",function(t){e.colorSlider=t,e.generateLayers()}),o.$on("change-parameter",function(t){e.parameter=t,e.generateLayers()}),o.$on("change-selectPeriod",function(t){null===e.selectPeriod?e.selectPeriod=t:(e.selectPeriod=t,e.generateLayers())}),o.$on("map-loaded",function(t){var a=new S.a.Popup({});e.addShapeLayers(),o.$emit("shapes-added"),e.map.on("mouseenter","mwtl-nl-7c3j4z",function(e){var r=e.features[0].geometry.coordinates.slice(),i=e.features[0].properties.naam;a.setLngLat(r).setHTML(i).addTo(t)}),e.map.on("mouseleave","mwtl-nl-7c3j4z",function(){a.remove()});var r=new S.a.Popup({}),i=window.document.createElement("popup");i.setAttribute("id","popup"),r.setDOMContent(i),e.map.on("click",function(t){if(r.remove(),r.setLngLat(t.lngLat).addTo(e.map).setDOMContent(i),"yearly"===e.selectPeriod)var a="CHL_1km_"+e.year.toString();else"six_yearly"===e.selectPeriod&&(a="CHL_1km_"+parseInt(e.year).toString()+"_"+(parseInt(e.year)+5).toString());e.makeBoxPlot(a,t.lngLat.lat,t.lngLat.lng)})})},methods:{deferredMountedTo:function(e){this.map=e},generateLayers:function(){var e=this;o.$emit("remove-all-layers"),m.a.each(m.a.range(C[0],C[1]),function(t){e.addMapLayers(t)})},addMapLayers:function(e){if("yearly"===this.selectPeriod)var t="CHL_1km_"+parseInt(e).toString(),a=parseInt(e).toString();else"six_yearly"===this.selectPeriod&&(t="CHL_1km_"+parseInt(e).toString()+"_"+(parseInt(e)+5).toString(),a=parseInt(e).toString()+"_"+(e+5));if("Classified mean"===this.parameter|"Classified P90"===this.parameter){var r="custom";m.a.each(this.colorSlider.get(),function(e,t){r+="-"+parseInt(e)});var i="&STYLES=boxfill/"+r+"&NUMCOLORBANDS=16&"}else i="&STYLES=boxfill/msfd&";var n={id:a,type:"raster",source:{type:"raster",tiles:[this.getMapString(t,i)],tileSize:256},paint:{"raster-opacity":0}};this.map.addLayer(n,P[0].id),o.$emit("add-layer",n)},getMapString:function(e,t){return"https://tl-ng038.xtr.deltares.nl/thredds/wms/Thredds/"+this.selectPeriod+"/"+e+".nc?SERVICE=WMS&REQUEST=GetMap&VERSION=1.3.0&LAYERS="+T[this.parameter]+"&CRS=EPSG:3857&BBOX={bbox-epsg-3857}&WIDTH=256&HEIGHT=256&FORMAT=image/png&COLORSCALERANGE=0,80&"+t+"TRANSPARENT=TRUE&"},makeBoxPlot:function(e,t,a){$.a.ajax({url:"https://tl-ng038.xtr.deltares.nl/thredds/ncss/grid/Thredds/"+this.selectPeriod+"/"+e+".nc?var=P10_chlorophyll&var=P25_chlorophyll&var=P50_chlorophyll&var=P75_chlorophyll&var=P90_chlorophyll&latitude="+t+"&longitude="+a+"&accept=csv",async:!1,success:function(r){var i=[r.split("\n")[1].split(",").slice(2).map(Number)];k.a.chart("popup",{chart:{type:"boxplot"},title:{text:"Chlorophyll"},legend:{enabled:!1},xAxis:{categories:["1"],title:{text:e.split(".")[0]}},yAxis:{title:{text:"Chlorophyll [mg/m^3]"}},series:[{name:e,data:i,tooltip:{headerFormat:"<em>lat: "+t+" lon: "+a+"</em><br/>"}}]})}})},addShapeLayers:function(){var e=this;m.a.each(P,function(t){e.map.addLayer(t)})}}},M={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"maplayers"}})},staticRenderFns:[]};var A={name:"app",data:function(){return{map:null,drawer:null,layers:[]}},mounted:function(){var e=this;this.map=this.$refs.map.map,o.$on("add-layer",function(t){e.layers.push(t)}),o.$on("remove-all-layers",function(){m.a.each(e.layers,function(t){e.map.removeLayer(t.id),e.map.removeSource(t.id)}),e.layers=[]}),this.map.on("load",function(t){o.$emit("map-loaded",e.map)})},methods:{},components:{"v-selection-panel":h,"v-map-layers":a("VU/8")(I,M,!1,function(e){a("u8bO")},null,null).exports,"v-info-panel":x}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{width:"400",id:"navdrawer",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-selection-panel",{attrs:{layers:e.layers,map:e.map}}),e._v(" "),a("v-info-panel",{attrs:{layers:e.layers,map:e.map}})],1),e._v(" "),a("v-toolbar",{attrs:{xs6:"",color:"grey lighten-4",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v("MSFD Eutro - Interactive web-mapping of chlorophyll indicator maps")])],1),e._v(" "),a("v-content",[a("div",{attrs:{id:"map"}},[a("v-mapbox",{ref:"map",attrs:{"access-token":"pk.eyJ1Ijoic2lnZ3lmIiwiYSI6Il8xOGdYdlEifQ.3-JZpqwUa3hydjAJFXIlMA","map-style":"mapbox://styles/mapbox/light-v9",center:[5.673272,52.079502],zoom:7.88,pitch:0,bearing:0,"min-zoom":5,id:"map"}},[a("v-map-layers",{attrs:{layers:e.layers,map:e.map}}),e._v(" "),a("v-mapbox-navigation-control")],1)],1)])],1)},staticRenderFns:[]};var j=a("VU/8")(A,R,!1,function(e){a("+ptQ")},null,null).exports,F=a("5BM0"),B=a.n(F);a("7zck");r.a.use(B.a),r.a.use(n.a),r.a.config.productionTip=!1,new r.a({el:"#app",template:"<App/>",components:{App:j}})},OPxY:function(e,t){},"Y+uu":function(e,t){},"f98/":function(e,t){},u8bO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e24e33989416f68be447.js.map